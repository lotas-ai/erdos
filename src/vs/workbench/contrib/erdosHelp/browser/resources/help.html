<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="Content-Security-Policy"
		content="default-src 'none'; media-src https:; script-src 'self' 'nonce-__nonce__'; style-src 'nonce-__nonce__'; frame-src *;">
	<style nonce="__nonce__">
		body {
			padding: 0;
			user-select: text;
			-webkit-user-select: text;
			-moz-user-select: text;
			-ms-user-select: text;
		}

		#help-iframe {
			border: none;
			width: 100%;
			height: 100%;
			position: absolute;
			user-select: text;
			-webkit-user-select: text;
			-moz-user-select: text;
			-ms-user-select: text;
		}

		* {
			user-select: text;
			-webkit-user-select: text;
			-moz-user-select: text;
			-ms-user-select: text;
		}
	</style>
</head>

<body>
	<iframe id="help-iframe" title="Help Content" src="__sourceURL__" loading="eager" allow="clipboard-read; clipboard-write">
	</iframe>
	<script nonce="__nonce__" async type="module">
		const vscode = acquireVsCodeApi();
		const helpContentWindow = document.getElementById("help-iframe").contentWindow;
		
		window.addEventListener("message", message => {
			if (message.source === helpContentWindow) {
				if (!message.data.id.startsWith("erdos-help-")) {
					return;
				}

				if (message.data.id === "erdos-help-complete") {
					const scrollX = __scrollX__;
					const scrollY = __scrollY__;
					if (scrollX || scrollY) {
						helpContentWindow.postMessage({
							id: "erdos-help-scroll-to",
							scrollX,
							scrollY
						}, "*");
					}
				}

				vscode.postMessage(message.data);
			} else {
				if (message.data.id.startsWith("erdos-help-")) {
					// Handle copy-selection command from parent
					if (message.data.id === "erdos-help-copy-selection") {
						vscode.postMessage({
							id: 'erdos-help-copy-selection',
							selection: window.getSelection().toString()
						});
					}
					
					// Forward other messages to inner iframe
					helpContentWindow.postMessage(message.data, "*");
				}
			}
		});
	</script>
</body>

</html>







